## HTTP/HTTPS

| HTTP 1.0 | HTTP 1.1          | HTTP 2.0                                               |
| -------- | ----------------- | ------------------------------------------------------ |
| 无状态   | 长链接 Keep-Alive | 头部压缩                                               |
| 明文传输 | **对头堵塞**      | 二进制格式                                             |
|          | **单向请求**      | 数据流                                                 |
|          | **Header过大**    | 多路复用：一个连接中并发多个请求或回应，而不用按照顺序 |
|          |                   | 服务器推送                                             |

| HTTP         | HTTPS           |
| ------------ | --------------- |
| 80           | 443             |
| TCP 三次握手 | TPC 3次+SSL4次  |
|              | 需要 CA证书     |
| 明文传输     | SSL/TLS安全加密 |



## 三次握手/四次握手

![img](file:///Users/josh/WorkStation/Lab/assets/http-connection.jpeg?lastModify=1618407702)

1. ACK —— 确认，使得确认号有效 
2. RST —— 重置连接（经常看到的reset by peer）就是此字段搞的鬼。
3. SYN —— 用于初如化一个连接的序列号。
4. FIN —— 该报文段的发送方已经结束向对方发送数据。

| 三次握手的意义 1. 确认双方都有接收发送信息的能力 2. 利用数据包的选项来传输特殊的信息 3. 交换初始序列号ISN(Initial Sequence Number) | 四次握手 1. 三次握手是ack+syn放在一个报文里面发送的 2. client的fin仅代表client不再发送数据 3. server的ack => client的fin. server的fin还需要上层应用决定 |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| 1. client的发送和server的接收能力 正常                       |                                                              |
| 2. client的接收发送和server的接收发送 正常                   |                                                              |
| 3. client开始发包, ack使 确认号有效                          |                                                              |
| 每次ack都为对方发送的syn上+1                                 | 每次ack都为对方发送的syn上+1                                 |



![img](file:///Users/josh/WorkStation/Lab/assets/syn.jpeg?lastModify=1618407702)

## TCP和UDP的区别

| tcp               | upd                                    |
| ----------------- | -------------------------------------- |
| 三次握手/四次握手 | 面向无连接                             |
| 仅支持单播传输    | 有单播，多播，广播的功能               |
| 面向字节流        | UDP是面向报文的                        |
| 可靠传输          | 不可靠性                               |
| TCP提供全双工通信 | 头部开销小，传输数据报文时是很高效的。 |

