## 复制集 Replica Set

在复制集中， 有且只有一个主节点 primary，可有一个或多个从节点 secondary

主从节点会通过心跳检测来判断是否健康，所有读写操作默认在主节点上进行

仲裁者 Arbiter 负责 主节点故障时，从 secondary中选出一个主节点

```shell
// 加入replSet 制定复制集名字
mongod --port 8017 --dbpath /home/work/data/db1 --replSet rstest
mongod --port 8016 --dbpath /home/work/data/db2 --replSet rstest
mongod --port 8015 --dbpath /home/work/data/db2 --replSet rstest
rs.initiate({
  _id:"rstest", // replSet指定的名称
  members:[{
    _id:0,
    host:"127.0.0.1:8017" // 主节点ip与端口
  }]
})
// 两个从节点加入复制集中
rs.add("127.0.0.1:8016")
rs.add("127.0.0.1:8015")
// 复制集的连接要指定多个host:port，用,连接,并在最后的option中支持replicaSet参数
mongodb://127.0.0.1:8017,127.0.0.1:8016,127.0.0.1:8015/books?replicaSet=rstest

```

